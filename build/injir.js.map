{"version":3,"file":"injir.js","mappings":"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","sources":["webpack://Injir/webpack/universalModuleDefinition","webpack://Injir/external umd \"jQuery\"","webpack://Injir/webpack/bootstrap","webpack://Injir/webpack/runtime/define property getters","webpack://Injir/webpack/runtime/hasOwnProperty shorthand","webpack://Injir/./src/helpers.js","webpack://Injir/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Injir\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"Injir\"] = factory(root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__145__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__145__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export const getTextNodes = (container) => {\n    return container.contents().filter(function() {\n        if(this.nodeType === 3) {\n            if(this.nodeValue.trim()) {\n                return true;\n            }\n        }\n        return false;\n    });\n}\n\nexport const getElementFromArray = (values, position = \"FIRST\") => {\n    if(position === \"LAST\") {\n        return values[values.length - 1];\n    } else if(Number.isInteger(position)) {\n        return values[position];\n    }\n    // First by default\n    return values[0];\n}","import {getTextNodes, getElementFromArray} from \"./helpers\";\n\nclass Injir {\n  #pollInterval;\n  #config;\n  #worker;\n  #$;\n  #alreadyCaptured = {\n    type: 'data',\n    name: 'injir-captured',\n    value: 'yes'\n  };\n  constructor(config, worker = false) {\n    const _ = this;\n    _.#$ = require(\"jquery\");\n\n    _.#config = config;\n    _.#worker = worker;\n    _.result = [];\n    _.#parseConfig();\n  }\n\n  #parseConfig() {\n    const _ = this;\n\n    if(_.#config.alreadyCaptured !== undefined) {\n      _.#alreadyCaptured = _.#config.alreadyCaptured;\n    }\n\n    if (_.#config.container) {\n      //Always parsing container first time\n      _.#parseContainer(_.#config.container);\n      //If needed adding interval\n      if(_.#config.pollInTimeout) {\n        _.#pollInterval = setInterval(() => {\n          _.#parseContainer(_.#config.container);\n        }, _.#config.pollInTimeout);\n      }\n    }\n  }\n\n  #parseContainer(selector) {\n    const _ = this, $ = _.#$;\n\n    $(selector).each(function () {\n      const self = $(this);\n      if(! _.#checkIsAlreadyCaptured(self)) {\n        _.#pushContainerInResults(self);\n      }\n    });\n  }\n\n  /**\n   * Checks if container is already captured in result array\n   * returns true if it already exists and false if not exists\n   * @param container\n   * @returns {boolean}\n   */\n  #checkIsAlreadyCaptured(container) {\n    const _ = this;\n    if(_.#alreadyCaptured === false) {\n      return false;\n    }\n    else if(_.#alreadyCaptured.type === 'data') {\n      if(container.data(_.#alreadyCaptured.name) === _.#alreadyCaptured.value) {\n        return true;\n      }\n    } else if(_.#alreadyCaptured.type === 'class') {\n      if(container.hasClass(_.#alreadyCaptured.value)) {\n        return true;\n      }\n    } else if(_.#alreadyCaptured.type === 'content') {\n      if(container.find(_.#alreadyCaptured.value).length) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  #pushContainerInResults(container) {\n    const _ = this;\n\n    if(_.#alreadyCaptured.type === 'data') {\n      container.data(_.#alreadyCaptured.name, _.#alreadyCaptured.value);\n    } else if(_.#alreadyCaptured.type === 'class') {\n      container.addClass(_.#alreadyCaptured.value);\n    }\n\n    const data = _.#parseNeededData(container);\n\n    const item = {\n      container: container,\n      data: data,\n    };\n\n    _.result.push(item);\n\n    if(_.#worker) {\n      _.#worker(container, data, true);\n\n      if(_.#config.overwriteChecker) {\n        _.#applyOverwriteChecker(item);\n      }\n    }\n  }\n\n  #applyOverwriteChecker(item) {\n    const _ = this, checker = _.#config.overwriteChecker;\n    let dataChanged = false;\n    let callback = () => {\n      if(item.mutationBlock === true) return;\n\n      if(item.container.find(checker.selector).length === 0) {\n        if(checker.parseData === true) {\n          const data = _.#parseNeededData(item.container);\n          if(JSON.stringify(data) !== JSON.stringify(data)) {\n            item.data = data;\n            dataChanged = true;\n          }\n        }\n        // Blocking rerun mutationObserver by self mutation\n        _.#disableObserver(item);\n        _.#worker(item.container, item.data, dataChanged);\n        _.#applyObserverConfig(checker, item, callback);\n      }\n    };\n\n    if(checker.mutationObserver !== undefined) {\n      _.#applyObserverConfig(checker, item, callback);\n    }\n    else if(checker.timeout && checker.selector) {\n      item.checkerInterval = setInterval(() => {\n        callback();\n      },checker.timeout);\n    }\n  }\n\n  #disableObserver(item) {\n    if(item.observer) {\n      item.observer.disconnect();\n      item.observer = undefined;\n    }\n  }\n\n  #applyObserverConfig(config, item, callback) {\n    if(config.mutationObserver !== undefined) {\n      const mutationConfig = { attributes: true, childList: true, subtree: true };\n      if(config.mutationObserver.attributes === false) mutationConfig.attributes = false;\n      if(config.mutationObserver.childList === false) mutationConfig.childList = false;\n      if(config.mutationObserver.subtree === false) mutationConfig.subtree = false;\n\n      const observer = new MutationObserver(() => {\n        callback();\n      });\n      observer.observe(item.container[0], mutationConfig);\n      item.observer = observer;\n    }\n  }\n\n  #parseNeededData(container) {\n    const _ = this, result = {};\n\n    if(Array.isArray(_.#config.dataToParse) && _.#config.dataToParse.length)\n    {\n      _.#config.dataToParse.forEach((item) => {\n        let dataContainer = container;\n        if(item.container) {\n          dataContainer = container.find(item.container);\n        }\n\n        let textValue = '';\n\n        if(item.attribute) {\n          textValue = dataContainer.attr(item.attribute);\n        } else {\n          if (item.textNode) {\n            const textNodes = getTextNodes(dataContainer);\n\n            if (textNodes.length) {\n              textValue = getElementFromArray(textNodes, item.textNode.position).nodeValue;\n            } else {\n              textValue = '';\n            }\n          } else {\n            textValue = dataContainer.text();\n          }\n\n          if (textValue && textValue.trim) {\n            textValue = textValue.trim();\n          }\n\n          if (item.replaceFix) {\n            item.replaceFix.forEach((replacement) => {\n              textValue = textValue.replace(replacement.from, replacement.to);\n            });\n          }\n\n          if (item.separator) {\n            let separator = item.separator.separator;\n            if (separator === 'SPACE') {\n              separator = /\\s+/;\n            }\n            const textParts = textValue.split(separator);\n            textValue = getElementFromArray(textParts, item.separator.position);\n          }\n        }\n\n        result[item.key] = textValue;\n      });\n    }\n\n    return result;\n  }\n}\n\nexport default Injir;\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__145__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","getElementFromArray","values","position","length","Number","isInteger","_","alreadyCaptured","container","pollInTimeout","setInterval","selector","$","each","self","type","data","name","value","hasClass","find","addClass","item","result","push","overwriteChecker","checker","dataChanged","callback","mutationBlock","parseData","JSON","stringify","mutationObserver","timeout","checkerInterval","observer","disconnect","config","mutationConfig","attributes","childList","subtree","MutationObserver","observe","Array","isArray","dataToParse","forEach","dataContainer","textValue","attribute","attr","textNode","textNodes","contents","filter","nodeType","nodeValue","trim","getTextNodes","text","replaceFix","replacement","replace","from","to","separator","textParts","split","worker"],"sourceRoot":""}