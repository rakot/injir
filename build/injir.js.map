{"version":3,"file":"injir.js","mappings":"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","sources":["webpack://Injir/webpack/universalModuleDefinition","webpack://Injir/external umd \"jQuery\"","webpack://Injir/webpack/bootstrap","webpack://Injir/webpack/runtime/define property getters","webpack://Injir/webpack/runtime/hasOwnProperty shorthand","webpack://Injir/webpack/runtime/make namespace object","webpack://Injir/./src/helpers.js","webpack://Injir/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Injir\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"Injir\"] = factory(root[\"jQuery\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__145__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__145__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const getTextNodes = (container) => {\n    return container.contents().filter(function() {\n        if(this.nodeType === 3) {\n            if(this.nodeValue.trim()) {\n                return true;\n            }\n        }\n        return false;\n    });\n}\n\nexport const getElementFromArray = (values, position = \"FIRST\") => {\n    if(position === \"LAST\") {\n        return values[values.length - 1];\n    } else if(Number.isInteger(position)) {\n        return values[position];\n    }\n    // First by default\n    return values[0];\n}","import {getTextNodes, getElementFromArray} from \"./helpers\";\n\nclass Injir {\n  #pollInterval;\n  #config;\n  #worker;\n  #$;\n  #alreadyCaptured = {\n    type: 'data',\n    name: 'injir-captured',\n    value: 'yes'\n  };\n  constructor(config, worker = false) {\n    const _ = this;\n    _.#$ = require(\"jquery\");\n\n    _.#config = config;\n    _.#worker = worker;\n    _.result = [];\n    _.#parseConfig();\n  }\n\n  #parseConfig() {\n    const _ = this;\n\n    if(_.#config.alreadyCaptured) {\n      _.#alreadyCaptured = _.#config.alreadyCaptured;\n    }\n\n    if (_.#config.container) {\n      //Always parsing container first time\n      _.#parseContainer(_.#config.container);\n      //If needed adding interval\n      if(_.#config.pollInTimeout) {\n        _.#pollInterval = setInterval(() => {\n          _.#parseContainer(_.#config.container);\n        }, _.#config.pollInTimeout);\n      }\n    }\n    // _.#checkIsContainerAlreadyProcessed();\n  }\n\n  #parseContainer(selector) {\n    const _ = this, $ = _.#$;\n\n    //pollInTimeout\n    //productSelector\n\n    $(selector).each(function () {\n      const self = $(this);\n      if(! _.#checkIsAlreadyCaptured(self)) {\n        _.#pushContainerInResults(self);\n      }\n    });\n  }\n\n  /**\n   * Checks if container is already captured in result array\n   * returns true if it already exists and false if not exists\n   * @param container\n   * @returns {boolean}\n   */\n  #checkIsAlreadyCaptured(container) {\n    const _ = this, $ = _.#$;\n    if(_.#alreadyCaptured.type === 'data') {\n      if(container.data(_.#alreadyCaptured.name) === _.#alreadyCaptured.value) {\n        return true;\n      }\n    } else if(_.#alreadyCaptured.type === 'class') {\n      if(container.hasClass(_.#alreadyCaptured.value)) {\n        return true;\n      }\n    } else if(_.#alreadyCaptured.type === 'content') {\n      if(container.find(_.#alreadyCaptured.value).length) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  #pushContainerInResults(container) {\n    const _ = this, $ = _.#$;\n\n    if(_.#alreadyCaptured.type === 'data') {\n      container.data(_.#alreadyCaptured.name, _.#alreadyCaptured.value);\n    } else if(_.#alreadyCaptured.type === 'class') {\n      container.addClass(_.#alreadyCaptured.value);\n    }\n\n    const data = _.#parseNeededData(container);\n\n    const item = {\n      container: container,\n      data: data,\n    };\n\n    _.result.push(item);\n\n    if(_.#worker) {\n      _.#worker(container, data);\n    }\n  }\n\n  #parseNeededData(container) {\n    const _ = this, $ = _.#$, result = {};\n\n    if(Array.isArray(_.#config.dataToParse) && _.#config.dataToParse.length)\n    {\n      _.#config.dataToParse.forEach((item) => {\n        let dataContainer = container;\n        if(item.container) {\n          dataContainer = container.find(item.container);\n        }\n\n        let textValue = '';\n\n        if(item.attribute) {\n          textValue = dataContainer.attr(item.attribute);\n        } else {\n          if (item.textNode) {\n            const textNodes = getTextNodes(dataContainer);\n\n            if (textNodes.length) {\n              textValue = getElementFromArray(textNodes, item.textNode.position).nodeValue;\n            } else {\n              textValue = '';\n            }\n          } else {\n            textValue = dataContainer.text();\n          }\n\n          if (textValue && textValue.trim) {\n            textValue = textValue.trim();\n          }\n\n          if (item.replaceFix) {\n            item.replaceFix.forEach((replacement) => {\n              textValue = textValue.replace(replacement.from, replacement.to);\n            });\n          }\n\n          if (item.separator) {\n            let separator = item.separator.separator;\n            if (separator === 'SPACE') {\n              separator = /\\s+/;\n            }\n            const textParts = textValue.split(separator);\n            textValue = getElementFromArray(textParts, item.separator.position);\n          }\n        }\n\n        result[item.key] = textValue;\n      });\n    }\n\n    return result;\n  }\n}\n\nexport default Injir;\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__145__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","getElementFromArray","values","position","length","Number","isInteger","_","this","alreadyCaptured","container","pollInTimeout","setInterval","selector","$","each","type","data","name","hasClass","find","addClass","item","result","push","Array","isArray","dataToParse","forEach","dataContainer","textValue","attribute","attr","textNode","textNodes","contents","filter","nodeType","nodeValue","trim","getTextNodes","text","replaceFix","replacement","replace","from","to","separator","textParts","split","config","worker"],"sourceRoot":""}